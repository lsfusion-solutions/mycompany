---
title: "Интеграция с телефонией Zadarma"
---

Модуль интеграции с IP-телефонией Zadarma позволяет объединить вашу облачную АТС с системой для автоматизации обработки вызовов, ведения истории общения с клиентами и прослушивания записей разговоров.

## 1. Подготовка в личном кабинете Zadarma

Прежде чем приступать к настройкам в системе, необходимо выполнить следующие действия в личном кабинете Zadarma:

1.  **Получение ключей API**:
    *   Перейдите в раздел **Настройки -> API и интерфейсы**.
    *   Сгенерируйте и скопируйте значения **Key** (Ключ) и **Secret** (Секрет).
2.  **Настройка уведомлений**:
    *   В том же разделе найдите поле для указания адреса уведомлений (Webhooks).
    *   Укажите адрес в формате: `https://<адрес_вашей_системы>/exec/Zadarma.notify`.
    *   Включите уведомления о событиях, которые вы хотите отслеживать (например, начало звонка, ответ, завершение).

## 2. Настройка подключения в системе

Параметры подключения задаются в разделе настроек интеграций на вкладке **Zadarma**.

Заполните следующие поля:
*   **Url** — адрес сервера телефонии (по умолчанию `https://api.zadarma.com`).
*   **Key** — API ключ, полученный в личном кабинете Zadarma.
*   **Secret** — API секрет, полученный в личном кабинете Zadarma.

## 3. Настройка АТС и сотрудников

Для корректной работы системы необходимо загрузить данные о внутренних номерах и связать их с сотрудниками.

1.  На вкладке **АТС** нажмите кнопку **Получить АТС**.
2.  Система получит идентификатор АТС и список всех настроенных внутренних номеров из облака Zadarma.
3.  Для каждого загруженного номера в колонке **Сотрудник** выберите соответствующего человека из справочника системы. Это позволит закреплять историю звонков за конкретными людьми.

## 4. Обработка звонков

### Входящие звонки
При поступлении вызова система выполняет ряд автоматических действий:
*   **Идентификация клиента**: По номеру телефона система ищет связанные записи.
*   **Маршрутизация звонка**: Если звонящий закреплен за определенным менеджером, система может передать в АТС команду на перенаправление вызова на внутренний номер этого сотрудника.
*   **Регистрация**: В разделе звонков автоматически создается запись, в которой фиксируется время, участники и результат разговора.

### Исходящие звонки
Вы можете совершать вызовы непосредственно из системы:
1.  Нажмите кнопку вызова рядом с номером телефона.
2.  Система инициирует **Обратный звонок** (Callback).
3.  Сначала зазвонит ваш телефон (или программа для звонков).
4.  Как только вы поднимете трубку, система начнет набор номера клиента.

### Виджет WebRTC
Если функция WebRTC включена, вы можете совершать и принимать звонки прямо в браузере без использования внешних телефонов или приложений. Виджет загрузится автоматически, если вашему пользователю назначен внутренний номер и система успешно получила ключ WebRTC от Zadarma.

## 5. Записи разговоров

Если ваша АТС настроена на запись разговоров, их можно прослушивать непосредственно в системе:

1.  В списке звонков воспользуйтесь функцией запроса записи.
2.  В зависимости от настроек, система либо проиграет запись удаленно, либо скачает файл для локального воспроизведения.
3.  Настройка **Проигрывать запись удаленно** в конфигурации Zadarma определяет способ воспроизведения.
